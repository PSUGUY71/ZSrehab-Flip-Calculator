{
  "meta": {
    "project": "ZsRehab Flip Calculator",
    "date": "2025-12-22",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "ZsRehab Flip Calculator is a specialized real estate deal calculator designed for house flippers and investors. It models the ZSrehab 100% loan product and provides comprehensive calculations for loan sizing and eligibility, closing costs, profitability, and deal analysis.",
  "core_goals": [
    "Provide accurate loan eligibility checks and sizing based on property and borrower criteria.",
    "Calculate detailed closing costs including lender fees, third-party fees, and title add-ons.",
    "Enable comprehensive profitability analysis with various exit strategies and ROI metrics.",
    "Allow comparison of multiple lender profiles with fee and interest rate breakdowns.",
    "Facilitate sensitivity analysis for holding periods, interest rates, and rehab cost overruns.",
    "Support deal management with save/load/delete functionality and user authentication.",
    "Generate printable, HUD-style closing statements in PDF-ready format."
  ],
  "key_features": [
    "Loan Calculation & Eligibility with Loan-to-Value (LTV) max 75% of ARV and Loan-to-Cost (LTC) based on purchase price plus rehab.",
    "Three Calculation Modes for closing costs: HIDEOUT (detailed fee breakdown), NORMAL (simplified 6% purchase price), CUSTOM (manual entry).",
    "Closing Cost Calculator covering lender fees (origination points, processing), transfer taxes, title insurance, legal fees, recording, Walker doc prep and other fees.",
    "Title Add-Ons Module with CPL fees and title endorsements, rules-based by lender type, manual override.",
    "Tax Proration Engine for Pennsylvania with millage-based calculations, fee cadence system (annual, quarterly), and auto-calculated periods.",
    "Profitability Analysis with metrics such as net profit, ROI, cash-on-cash return, and holding costs.",
    "Lender Comparison Tool to save multiple lender profiles and compare side-by-side on interest rates, points, fees, and total costs.",
    "Sensitivity Analysis for scenarios including holding periods, interest rates, rehab overruns, and break-even calculations.",
    "Deal Management with Supabase backend for saving, loading, deleting deals, plus user authentication.",
    "Max Offer Calculator to determine maximum allowable offer for target profit or ROI.",
    "Seller Net Analysis for seller-side cost calculations.",
    "Reporting & Export feature with printable HUD-style statements, detailed fee breakdowns, and PDF-ready output."
  ],
  "user_flow_summary": [
    "User authenticates via Supabase login/signup.",
    "User inputs property details such as address, property type, purchase price, ARV, rehab budget, and closing date.",
    "User configures loan by selecting lender or entering custom terms including interest rate, points, and fees.",
    "User sets closing costs using one of three modes (HIDEOUT, NORMAL, CUSTOM) and configures third-party fees and title add-ons.",
    "User configures tax proration details including millage rates and fee cadences (annual/quarterly).",
    "User views results for loan eligibility, total cash to close, and profitability metrics.",
    "User performs sensitivity analysis on holding periods, interest rates, and rehab overruns.",
    "User saves the deal, compares lender profiles side-by-side, and exports reports.",
    "Calculations are updated in real-time upon input changes with rules-based logic including eligibility, fee proration, and loan sizing constraints.",
    "User can print detailed HUD-style closing statements in report mode."
  ],
  "validation_criteria": [
    "Accurate loan eligibility validation including FICO scores, experience, liquidity, and property type rules.",
    "Closing cost calculations match lender fees, third-party fees, and title add-ons with correct proration.",
    "Tax proration engine computes correct tax splits based on Pennsylvania county, township, school district millage rates and closing dates.",
    "Profitability analysis correctly computes net profit, ROI, cash-on-cash returns, and holding costs.",
    "Lender comparison displays correct fees, points, interest rates, and selects the best lender appropriately.",
    "Sensitivity analysis scenarios adjust calculations realistically and break-even targets are accurate.",
    "Deals can be saved, loaded, and deleted reliably with proper user authentication and data persistence via Supabase.",
    "Report mode generates printable HUD-style statements with fully detailed fee breakdowns and PDF export readiness.",
    "UI responds with real-time calculation updates on input changes without errors.",
    "Calculation rules and constraints enforce all product business logic consistently."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 19",
      "Vite",
      "Supabase",
      "PostgreSQL",
      "Tailwind CSS",
      "Recharts"
    ],
    "features": [
      {
        "name": "Authentication",
        "description": "User authentication with Supabase Auth, including login, signup, logout, and session management",
        "files": [
          "components/AuthScreen.tsx",
          "lib/supabase.ts",
          "App.tsx"
        ]
      },
      {
        "name": "Loan Calculator",
        "description": "Core loan calculation engine that computes loan sizing, eligibility, LTV, LTC ratios, and loan terms",
        "files": [
          "utils/calculations.ts",
          "utils/newCalculations.ts",
          "types.ts"
        ]
      },
      {
        "name": "Closing Cost Calculator",
        "description": "Detailed closing cost calculations including lender fees, third-party fees, title insurance, transfer taxes, and prorations",
        "files": [
          "utils/calculations.ts",
          "utils/pennsylvaniaTitleRates.ts",
          "components/LoanEstimateCard.tsx"
        ]
      },
      {
        "name": "Title Add-Ons Module",
        "description": "Rules-based calculator for CPL fees and title endorsements with lender type presets and manual override",
        "files": [
          "components/TitleAddOnsCard.tsx",
          "utils/titleAddOnsCalculator.ts"
        ]
      },
      {
        "name": "Tax Proration Engine",
        "description": "Pennsylvania tax proration calculator with millage-based calculations, fee cadence system (annual/quarterly), and auto-calculated periods",
        "files": [
          "components/TaxProrationCard.tsx",
          "utils/taxProration.ts",
          "utils/feeCadenceCalculations.ts",
          "components/FeeCadenceConfig.tsx"
        ]
      },
      {
        "name": "Profitability Analysis",
        "description": "Profit analysis with exit strategies (SELL/REFI), ROI calculations, holding costs, and net profit calculations",
        "files": [
          "components/ClosingProfitCard.tsx",
          "components/ProfitTable.tsx",
          "components/ValuationReturns.tsx",
          "utils/newCalculations.ts"
        ]
      },
      {
        "name": "Lender Comparison",
        "description": "Compare multiple lenders side-by-side with saved lender profiles, fee comparisons, and best lender selection",
        "files": [
          "components/LenderComparison.tsx",
          "components/LenderModal.tsx",
          "utils/lenderComparison.ts"
        ]
      },
      {
        "name": "Sensitivity Analysis",
        "description": "Scenario analysis for holding periods, interest rates, and rehab overruns with break-even calculations",
        "files": [
          "components/SensitivityAnalysis.tsx",
          "components/SensitivityControlsCard.tsx",
          "components/BreakEvenTargetsCard.tsx"
        ]
      },
      {
        "name": "Max Offer Calculator",
        "description": "Calculate maximum allowable offer price for target profit or ROI goals",
        "files": [
          "components/MaxOfferCard.tsx",
          "utils/newCalculations.ts"
        ]
      },
      {
        "name": "Seller Net Analysis",
        "description": "Calculate seller-side costs including mortgage payoff, commissions, transfer taxes, and net proceeds",
        "files": [
          "components/SellerNetAnalysis.tsx",
          "utils/calculations.ts"
        ]
      },
      {
        "name": "Deal Management",
        "description": "Save, load, and delete deals with Supabase database integration and real-time sync",
        "files": [
          "components/DealModal.tsx",
          "lib/database.ts",
          "App.tsx"
        ]
      },
      {
        "name": "Report Mode",
        "description": "Printable HUD-style closing statement with detailed fee breakdowns and PDF-ready format",
        "files": [
          "ReportMode.tsx",
          "components/LoanEstimateCard.tsx"
        ]
      },
      {
        "name": "Input Sections",
        "description": "Comprehensive input forms for property details, loan terms, closing costs, and deal parameters",
        "files": [
          "InputSections.tsx",
          "components/InputGroup.tsx",
          "components/HelpTooltip.tsx"
        ]
      },
      {
        "name": "Results Display",
        "description": "Results column displaying calculated metrics, eligibility alerts, and comparison data",
        "files": [
          "components/ResultsColumn.tsx",
          "components/EligibilityAlert.tsx",
          "components/ResultRow.tsx",
          "components/FeeBreakdownItem.tsx"
        ]
      },
      {
        "name": "Cash Flow Analysis",
        "description": "Calculate cash flow requirements, capital needs, and monthly payment scenarios",
        "files": [
          "components/CashFlowCapitalCard.tsx",
          "utils/newCalculations.ts"
        ]
      },
      {
        "name": "Visualizations",
        "description": "Charts and graphs for profitability, returns, and deal analysis using Recharts",
        "files": [
          "components/Visuals.tsx",
          "components/ValuationReturns.tsx"
        ]
      },
      {
        "name": "App Header",
        "description": "Navigation header with user info, deal management controls, and report mode toggle",
        "files": [
          "components/AppHeader.tsx"
        ]
      }
    ]
  }
}
